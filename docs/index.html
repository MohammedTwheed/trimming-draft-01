<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mohamed Tawheed">
<meta name="author" content="Seif Ibrahim">
<meta name="dcterms.date" content="2024-04-17">
<meta name="keywords" content="Pump impeller trimming, Neural networks, Hyperparameter optimization, Genetic algorithms, Mean squared error">

<title>pump impeller trimming draft-01</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


<meta name="citation_title" content="pump impeller trimming draft-01">
<meta name="citation_abstract" content="This paper presents a genetic algorithm (GA) methodology to optimize neural network hyperparameters in the context of pump impeller trimming. Impeller trimming, a process involving modifications to pump impeller geometry, traditionally requires expert knowledge and empirical methods to achieve the desired performance. The use of neural networks (NNs) provides an automated approach to improve the impeller trimming process based on input data and performance outcomes. The proposed method uses a GA to identify the optimal NN hyperparameters, such as hidden layer size, training function, activation function, and maximum epochs, aiming to minimize the mean squared error (MSE) between the network&amp;amp;#039;s predictions and the actual target outcomes. This paper discusses the implementation details of the optimization process and explains the key components and their significance.
">
<meta name="citation_keywords" content="Pump impeller trimming,Neural networks,Hyperparameter optimization,Genetic algorithms,Mean squared error">
<meta name="citation_author" content="Mohamed Tawheed">
<meta name="citation_author" content="Seif Ibrahim">
<meta name="citation_publication_date" content="2024-04-17">
<meta name="citation_cover_date" content="2024-04-17">
<meta name="citation_year" content="2024">
<meta name="citation_online_date" content="2024-04-17">
<meta name="citation_language" content="en">
<meta name="citation_journal_title" content="bachelor project with prof. dr. mohamed farid khalil">
<meta name="citation_reference" content="citation_title=Application of artificial neural network for the prediction of trimmed impeller size of a centrifugal pump.;,citation_author=Mohamed Khalil;,citation_author=Mohamed Elgohary;,citation_author=Ali Shaito;,citation_publication_date=2013-12;,citation_cover_date=2013-12;,citation_year=2013;">
</head>

<body>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">pump impeller trimming draft-01</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
            <div class="quarto-title-meta-author">
          <div class="quarto-title-meta-heading">Authors</div>
          <div class="quarto-title-meta-heading">Affiliations</div>
          
                <div class="quarto-title-meta-contents">
            <p class="author">Mohamed Tawheed <a href="mailto:moh@example" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0002-0760-5497" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        Curvenote
                      </p>
                  </div>
                      <div class="quarto-title-meta-contents">
            <p class="author">Seif Ibrahim <a href="https://orcid.org/0000-0002-7859-8394" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        alexandria university school of mechanicaL engineering
                      </p>
                  </div>
                    </div>
        
        <div class="quarto-title-meta">

                      
                <div>
            <div class="quarto-title-meta-heading">Published</div>
            <div class="quarto-title-meta-contents">
              <p class="date">April 17, 2024</p>
            </div>
          </div>
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      <div class="quarto-alternate-formats"><div class="quarto-title-meta-heading">Other Formats</div><div class="quarto-title-meta-contents"><p><a href="index.docx"><i class="bi bi-file-word"></i>MS Word</a></p></div><div class="quarto-title-meta-contents"><p><a href="index.pdf"><i class="bi bi-file-pdf"></i>PDF (agu)</a></p></div><div class="quarto-title-meta-contents"><p><a href="index-meca.zip" data-meca-link="true"><i class="bi bi-archive"></i>MECA Bundle</a></p></div></div></div>
    </div>

    <div>
      <div class="abstract">
        <div class="block-title">Abstract</div>
        <p>This paper presents a genetic algorithm (GA) methodology to optimize neural network hyperparameters in the context of pump impeller trimming. Impeller trimming, a process involving modifications to pump impeller geometry, traditionally requires expert knowledge and empirical methods to achieve the desired performance. The use of neural networks (NNs) provides an automated approach to improve the impeller trimming process based on input data and performance outcomes. The proposed method uses a GA to identify the optimal NN hyperparameters, such as hidden layer size, training function, activation function, and maximum epochs, aiming to minimize the mean squared error (MSE) between the network’s predictions and the actual target outcomes. This paper discusses the implementation details of the optimization process and explains the key components and their significance.</p>
      </div>
    </div>

    <div>
      <div class="keywords">
        <div class="block-title">Keywords</div>
        <p>Pump impeller trimming, Neural networks, Hyperparameter optimization, Genetic algorithms, Mean squared error</p>
      </div>
    </div>

    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> introduction</a></li>
  <li><a href="#methodology" id="toc-methodology" class="nav-link" data-scroll-target="#methodology"><span class="header-section-number">2</span> Methodology</a>
  <ul class="collapse">
  <li><a href="#define-options" id="toc-define-options" class="nav-link" data-scroll-target="#define-options"><span class="header-section-number">2.1</span> Define Options</a></li>
  <li><a href="#nested-evaluation-function" id="toc-nested-evaluation-function" class="nav-link" data-scroll-target="#nested-evaluation-function"><span class="header-section-number">2.2</span> Nested Evaluation Function</a></li>
  <li><a href="#random-seed-and-bounds" id="toc-random-seed-and-bounds" class="nav-link" data-scroll-target="#random-seed-and-bounds"><span class="header-section-number">2.3</span> Random Seed and Bounds</a>
  <ul class="collapse">
  <li><a href="#importance-of-random-seed" id="toc-importance-of-random-seed" class="nav-link" data-scroll-target="#importance-of-random-seed"><span class="header-section-number">2.3.1</span> Importance of Random Seed:</a></li>
  </ul></li>
  <li><a href="#ga-options" id="toc-ga-options" class="nav-link" data-scroll-target="#ga-options"><span class="header-section-number">2.4</span> GA Options</a></li>
  <li><a href="#perform-optimization" id="toc-perform-optimization" class="nav-link" data-scroll-target="#perform-optimization"><span class="header-section-number">2.5</span> Perform Optimization</a></li>
  <li><a href="#extract-and-round" id="toc-extract-and-round" class="nav-link" data-scroll-target="#extract-and-round"><span class="header-section-number">2.6</span> Extract and Round</a></li>
  <li><a href="#report-results" id="toc-report-results" class="nav-link" data-scroll-target="#report-results"><span class="header-section-number">2.7</span> Report Results</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">3</span> Conclusion</a></li>
  <li><a href="#code-documentation" id="toc-code-documentation" class="nav-link" data-scroll-target="#code-documentation"><span class="header-section-number">4</span> code documentation</a>
  <ul class="collapse">
  <li><a href="#function-overview" id="toc-function-overview" class="nav-link" data-scroll-target="#function-overview"><span class="header-section-number">4.0.1</span> Function Overview:</a></li>
  <li><a href="#importance-of-random-seed-1" id="toc-importance-of-random-seed-1" class="nav-link" data-scroll-target="#importance-of-random-seed-1"><span class="header-section-number">4.0.2</span> Importance of Random Seed:</a></li>
  <li><a href="#concepts-underlying-epochs" id="toc-concepts-underlying-epochs" class="nav-link" data-scroll-target="#concepts-underlying-epochs"><span class="header-section-number">4.0.3</span> Concepts Underlying Epochs:</a></li>
  </ul></li>
  <li><a href="#test-citation" id="toc-test-citation" class="nav-link" data-scroll-target="#test-citation"><span class="header-section-number">5</span> test citation</a>
  <ul class="collapse">
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-notebooks"><h2>Notebooks</h2><ul><li><a href="notebooks\data-screening-preview.html"><i class="bi bi-journal-code"></i>data-screening.qmd</a></li></ul></div></nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">



  


<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> introduction</h1>
<p>Pump impeller trimming is a critical procedure in optimizing pump performance for specific applications. It involves modifying the impeller’s geometry to achieve desired hydraulic characteristics such as head, flow rate, and efficiency. Traditionally, the process has been dependent on empirical methods and engineering expertise. However, the introduction of artificial neural networks (NNs) offers a data-driven approach to automate and enhance impeller trimming.</p>
<p>NNs excel at modeling complex relationships between input data and desired outputs. In the case of pump impeller trimming, the input data (x) can include geometric parameters of the impeller, while the target data (t) can consist of pump performance metrics. By training an NN on a dataset of impeller designs and performance outcomes, the network can learn to predict new impeller performance based on their geometries.</p>
<p>Achieving optimal NN performance requires selecting appropriate hyperparameters, which influence network architecture and the learning process. Key NN hyperparameters include the size of the hidden layer, the training function for weight updates, the activation function introducing non-linearity, and the maximum number of training epochs.</p>
</section>
<section id="methodology" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Methodology</h1>
<p>This paper outlines a genetic algorithm (GA) methodology for optimizing neural network hyperparameters in pump impeller trimming. GAs are suitable for searching for optimal solutions in complex, high-dimensional spaces. The GA approach used in this study involves a population of candidate hyperparameter sets. Each set is evaluated by training an NN with those hyperparameters and measuring the resulting MSE on a validation dataset. The GA iteratively selects promising hyperparameter sets based on MSE values, performs crossover and mutation to create new candidates, and continues until a stopping criterion (such as maximum generations or elapsed time) is met.</p>
<section id="define-options" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="define-options"><span class="header-section-number">2.1</span> Define Options</h2>
<p>Define the set of available training functions (e.g., Levenberg-Marquardt, Bayesian Regularization) and activation functions (e.g., tansigmoid, logarithmic sigmoid).</p>
</section>
<section id="nested-evaluation-function" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="nested-evaluation-function"><span class="header-section-number">2.2</span> Nested Evaluation Function</h2>
<p>Implement a nested function <code>evaluateHyperparameters(hyperParams, x, t, randomSeed)</code> to evaluate a candidate hyperparameter set (<code>hyperParams</code>), input data (<code>x</code>), and target data (<code>t</code>). This function: - Extracts individual hyperparameters (hidden layer size, maximum epochs, training and activation function indices). - Defines an NN architecture with the given hyperparameters. - Splits data into training, validation, and testing sets. - Trains the NN using the training data and specified training function. - Evaluates the NN on validation data and calculates MSE. - Returns the calculated MSE.</p>
</section>
<section id="random-seed-and-bounds" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="random-seed-and-bounds"><span class="header-section-number">2.3</span> Random Seed and Bounds</h2>
<p>set a random seed for reproducibility and define bounds for each hyperparameter based on practical considerations and prior knowledge.</p>
<section id="importance-of-random-seed" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="importance-of-random-seed"><span class="header-section-number">2.3.1</span> Importance of Random Seed:</h3>
<ul>
<li><strong>Reproducibility:</strong> Setting a random seed ensures that the neural network training process is reproducible. This allows for consistent results across different runs and helps in comparing models fairly.</li>
<li><strong>Comparison:</strong> When testing different hyperparameters or models, using the same random seed allows for a direct comparison of their performance.</li>
</ul>
</section>
</section>
<section id="ga-options" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="ga-options"><span class="header-section-number">2.4</span> GA Options</h2>
<p>Configure GA options using <code>optimoptions('ga')</code>, specifying parameters such as maximum allowed time.</p>
</section>
<section id="perform-optimization" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="perform-optimization"><span class="header-section-number">2.5</span> Perform Optimization</h2>
<p>Execute the GA using <code>ga</code> from MATLAB’s Optimization Toolbox. This function uses the <code>evaluateHyperparameters</code> function as the objective function to minimize, along with the number of hyperparameters, bounds, and GA options.</p>
</section>
<section id="extract-and-round" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="extract-and-round"><span class="header-section-number">2.6</span> Extract and Round</h2>
<p>Obtain the final optimized hyperparameter set and round them (if necessary) for practical NN implementation.</p>
</section>
<section id="report-results" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="report-results"><span class="header-section-number">2.7</span> Report Results</h2>
<p>Report the optimized hyperparameters, final MSE, random seed used, and total elapsed time of the optimization process.</p>
</section>
</section>
<section id="conclusion" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Conclusion</h1>
<p>This paper presents a GA-based approach for optimizing neural network hyperparameters in the context of pump impeller trimming. The methodology enables a data-driven, automated optimization process, providing potential improvements in efficiency and performance in pump design and operation. Future work may explore refining the genetic algorithm for better convergence or testing the approach with more complex NN architectures.</p>
</section>
<section id="code-documentation" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> code documentation</h1>
<p><strong>Optimizing Neural Network Hyperparameters for Pump Impeller Trimming</strong></p>
<p>This code implements a function called <code>optimizeNNForTrimmingPumpImpeller</code> that uses a Genetic Algorithm (GA) to optimize the hyperparameters of a neural network for pump impeller trimming.</p>
<p><strong>1. Starting Timer and User Notification:</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode matlab code-with-copy"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Start timer to measure the duration of the optimization process.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">tic</span><span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">disp</span>(<span class="st">"Optimization in progress. This process may take up to 30 seconds..."</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>The <code>tic</code> function starts a timer to measure how long the optimization process takes.</li>
<li>The <code>disp</code> function displays a message to the user indicating that the optimization is underway and might take up to 30 seconds.</li>
</ul>
<p><strong>2. Defining Training and Activation Function Options:</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode matlab code-with-copy"><code class="sourceCode matlab"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">% Define the available options for training functions and activation functions.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">trainingFunctionOptions</span> <span class="op">=</span> {<span class="ss">'trainlm'</span><span class="op">,</span> <span class="ss">'trainbr'</span><span class="op">,</span> <span class="op">...</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="ss">'trainrp'</span><span class="op">,</span> <span class="ss">'traincgb'</span><span class="op">,</span> <span class="ss">'traincgf'</span><span class="op">,...</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>     <span class="ss">'traincgp'</span><span class="op">,</span> <span class="ss">'traingdx'</span><span class="op">,</span> <span class="ss">'trainoss'</span>}<span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">activationFunctionOptions</span> <span class="op">=</span> {<span class="ss">'tansig'</span><span class="op">,</span> <span class="ss">'logsig'</span>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>This section defines two cell arrays.
<ul>
<li><code>trainingFunctionOptions</code>: This array stores names of various training functions available in MATLAB’s <code>fitnet</code> object. Training functions determine how the neural network updates its weights during training, impacting its learning behavior.</li>
<li><code>activationFunctionOptions</code>: This array stores names of activation functions that can be applied in the neural network’s hidden layer. Activation functions introduce non-linearity, allowing the network to model complex relationships between inputs and outputs.</li>
</ul></li>
</ul>
<p><strong>3. Defining Bounds and Options for Genetic Algorithm (GA):</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode matlab code-with-copy"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Define bounds for the genetic algorithm optimization.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="va">lowerBounds</span> <span class="op">=</span> [<span class="fl">5</span><span class="op">,</span> <span class="fl">50</span><span class="op">,</span> <span class="fl">1</span><span class="op">,</span> <span class="fl">1</span>]<span class="op">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">upperBounds</span> <span class="op">=</span> [<span class="fl">200</span><span class="op">,</span> <span class="fl">200</span><span class="op">,</span> <span class="fl">8</span><span class="op">,</span> <span class="fl">2</span>]<span class="op">;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Define options for the genetic algorithm.</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="va">gaOptions</span> <span class="op">=</span> <span class="va">optimoptions</span>(<span class="ss">'ga'</span><span class="op">,</span> <span class="ss">'MaxTime'</span><span class="op">,</span> <span class="fl">20</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong>Bounds for GA Search (<code>lowerBounds</code> and <code>upperBounds</code>)</strong>
<ul>
<li>These vectors define the minimum and maximum allowable values for each hyperparameter during the GA optimization. For instance, <code>lowerBounds = [5, 50, 1, 1]</code> specifies a minimum hidden layer size of 5 neurons, a minimum of 50 training epochs, and minimum indices of 1 for the training function and activation function (since these indices correspond to entries within the options arrays we defined earlier). The upper bounds define the maximum allowed values for each hyperparameter.</li>
</ul></li>
<li><strong>GA Options (<code>gaOptions</code>)</strong>
<ul>
<li>This line uses <code>optimoptions('ga')</code> to create a structure containing options for the GA. The GA is a search algorithm inspired by biological evolution. It iteratively tweaks candidate solutions (in our case, sets of hyperparameters) and selects promising ones based on their performance (MSE in this case) to create new generations. You can modify these options to control aspects like population size (number of candidate hyperparameter sets considered simultaneously) and termination criteria (when to stop the search). Here, <code>'MaxTime', 20</code> sets a maximum allowed time of 20 seconds for the optimization process per iteration (not total time). The algorithm stops after running for MaxTime seconds, as measured by tic and toc. This limit is enforced after each iteration, so ga can exceed the limit when an iteration takes substantial time.</li>
</ul></li>
</ul>
<p><strong>4. Global Variable to Store Best Network:</strong></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode matlab code-with-copy"><code class="sourceCode matlab"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>    <span class="co">% Global variable to store the best trained neural network found during optimization.</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> <span class="va">bestTrainedNet</span><span class="op">;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">bestTrainedNet</span> <span class="op">=</span> []<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>A global variable named <code>bestTrainedNet</code> is declared. This variable will be used to store the neural network model that achieves the lowest MSE during the optimization process.</li>
</ul>
<p><strong>5. Nested Function: evaluateHyperparameters</strong></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode matlab code-with-copy"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">% Nested function to evaluate hyperparameters using the neural network.</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="va">mse</span> <span class="op">=</span> <span class="va">evaluateHyperparameters</span>(<span class="va">hyperParams</span><span class="op">,</span> <span class="va">x</span><span class="op">,</span> <span class="va">t</span><span class="op">,</span> <span class="va">randomSeed</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>        <span class="va">rng</span>(<span class="va">randomSeed</span>)<span class="op">;</span> <span class="co">% Set random seed for reproducibility.</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="co">% Extract hyperparameters.</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">hiddenLayerSize</span> <span class="op">=</span> <span class="va">round</span>(<span class="va">hyperParams</span>(<span class="fl">1</span>))<span class="op">;</span> <span class="co">%Hidden Layer Size</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">maxEpochs</span> <span class="op">=</span> <span class="va">round</span>(<span class="va">hyperParams</span>(<span class="fl">2</span>))<span class="op">;</span>       <span class="co">%Max Epochs</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span class="va">trainingFunctionIdx</span> <span class="op">=</span> <span class="va">round</span>(<span class="va">hyperParams</span>(<span class="fl">3</span>))<span class="op">;</span> <span class="co">%Training Function</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        <span class="va">activationFunctionIdx</span> <span class="op">=</span> <span class="va">round</span>(<span class="va">hyperParams</span>(<span class="fl">4</span>))<span class="op">;</span><span class="co">%Activation </span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        <span class="co">%Function or transfere function</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>        <span class="co">% Define the neural network.</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>        <span class="va">net</span> <span class="op">=</span> <span class="va">fitnet</span>(<span class="va">hiddenLayerSize</span><span class="op">,</span> <span class="va">trainingFunctionOptions</span>{<span class="va">trainingFunctionIdx</span>})<span class="op">;</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>        <span class="va">net</span>.<span class="va">trainParam</span>.<span class="va">showWindow</span> <span class="op">=</span> <span class="va">false</span><span class="op">;</span> <span class="co">% Suppress training GUI for efficiency.</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>        <span class="va">net</span>.<span class="va">trainParam</span>.<span class="va">epochs</span> <span class="op">=</span> <span class="va">maxEpochs</span><span class="op">;</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>        <span class="va">net</span>.<span class="va">layers</span>{<span class="fl">1</span>}.<span class="va">transferFcn</span> <span class="op">=</span> <span class="va">activationFunctionOptions</span>{<span class="va">activationFunctionIdx</span>}<span class="op">;</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>        <span class="co">% Define data split for training, validation, and testing.</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>        <span class="va">net</span>.<span class="va">divideParam</span>.<span class="va">trainRatio</span> <span class="op">=</span> <span class="fl">0.7</span><span class="op">;</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>        <span class="va">net</span>.<span class="va">divideParam</span>.<span class="va">valRatio</span> <span class="op">=</span> <span class="fl">0.15</span><span class="op">;</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>        <span class="va">net</span>.<span class="va">divideParam</span>.<span class="va">testRatio</span> <span class="op">=</span> <span class="fl">0.15</span><span class="op">;</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>        <span class="co">% Train the neural network.</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>        [<span class="va">trainedNet</span><span class="op">,</span> <span class="op">~</span>] <span class="op">=</span> <span class="va">train</span>(<span class="va">net</span><span class="op">,</span> <span class="va">x</span><span class="op">,</span> <span class="va">t</span>)<span class="op">;</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>        <span class="co">% Evaluate the model performance using mean squared error (MSE).</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>        <span class="va">predictions</span> <span class="op">=</span> <span class="va">trainedNet</span>(<span class="va">x</span>)<span class="op">;</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>        <span class="va">mse</span> <span class="op">=</span> <span class="va">perform</span>(<span class="va">trainedNet</span><span class="op">,</span> <span class="va">t</span><span class="op">,</span> <span class="va">predictions</span>)<span class="op">;</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>        <span class="co">% Check if the current MSE is the best MSE so far </span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>        <span class="co">%and update the global variable if necessary.</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> <span class="va">isempty</span>(<span class="va">bestTrainedNet</span>) <span class="op">||</span> <span class="va">mse</span> <span class="op">&lt;</span> <span class="va">perform</span>(<span class="va">bestTrainedNet</span><span class="op">,...</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>         <span class="va">t</span><span class="op">,</span> <span class="va">bestTrainedNet</span>(<span class="va">x</span>))</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>            <span class="va">bestTrainedNet</span> <span class="op">=</span> <span class="va">trainedNet</span><span class="op">;</span></span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a>        <span class="kw">end</span></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The function <code>evaluateHyperparameters</code> evaluates a set of hyperparameters for a neural network model. It uses the hyperparameters to define, train, and evaluate a neural network, returning the model’s mean squared error (MSE) as a measure of performance.</p>
<section id="function-overview" class="level3" data-number="4.0.1">
<h3 data-number="4.0.1" class="anchored" data-anchor-id="function-overview"><span class="header-section-number">4.0.1</span> Function Overview:</h3>
<ol type="1">
<li><strong>Inputs:</strong>
<ul>
<li><code>hyperParams</code>: A vector of hyperparameters including:
<ul>
<li><code>hiddenLayerSize</code>: The size of the hidden layer in the neural network.</li>
<li><code>maxEpochs</code>: The maximum number of epochs (training iterations).</li>
<li><code>trainingFunctionIdx</code>: The index of the training function to use.</li>
<li><code>activationFunctionIdx</code>: The index of the activation function to use.</li>
</ul></li>
<li><code>x</code>: The input data (features) for the neural network.</li>
<li><code>t</code>: The target data (labels) for the neural network.</li>
<li><code>randomSeed</code>: The random seed for reproducibility.</li>
</ul></li>
<li><strong>Set Random Seed:</strong>
<ul>
<li>The function starts by setting the random seed using <code>rng(randomSeed)</code> for reproducibility. This ensures that the neural network training process is consistent and repeatable.</li>
</ul></li>
<li><strong>Extract and Apply Hyperparameters:</strong>
<ul>
<li>The function extracts hyperparameters from the input vector <code>hyperParams</code>.</li>
<li>It uses these hyperparameters to define the neural network architecture, training function, and activation function.</li>
</ul></li>
<li><strong>Data Splitting:</strong>
<ul>
<li>The function defines how to split the data into training, validation, and testing sets (70% for training, 15% for validation, and 15% for testing).</li>
</ul></li>
<li><strong>Train the Neural Network:</strong>
<ul>
<li>The function trains the neural network using the specified hyperparameters and input data.</li>
</ul></li>
<li><strong>Evaluate Performance:</strong>
<ul>
<li>The function evaluates the trained network’s performance using mean squared error (MSE), a measure of prediction accuracy.</li>
</ul></li>
<li><strong>Track the Best Trained Network:</strong>
<ul>
<li>The function compares the current MSE to the best MSE seen so far. If the current MSE is better, the trained network is stored as the best-trained network.</li>
</ul></li>
</ol>
</section>
<section id="importance-of-random-seed-1" class="level3" data-number="4.0.2">
<h3 data-number="4.0.2" class="anchored" data-anchor-id="importance-of-random-seed-1"><span class="header-section-number">4.0.2</span> Importance of Random Seed:</h3>
<ul>
<li><strong>Reproducibility:</strong> Setting a random seed ensures that the neural network training process is reproducible. This allows for consistent results across different runs and helps in comparing models fairly.</li>
<li><strong>Comparison:</strong> When testing different hyperparameters or models, using the same random seed allows for a direct comparison of their performance.</li>
</ul>
</section>
<section id="concepts-underlying-epochs" class="level3" data-number="4.0.3">
<h3 data-number="4.0.3" class="anchored" data-anchor-id="concepts-underlying-epochs"><span class="header-section-number">4.0.3</span> Concepts Underlying Epochs:</h3>
<ul>
<li><strong>Epochs:</strong> An epoch is a complete pass through the entire training dataset. During each epoch, the neural network updates its weights based on the training data.</li>
<li><strong>Why Search for Optimal Epochs:</strong> The number of epochs affects how much the network learns from the data:
<ul>
<li><strong>Too Few Epochs:</strong> The network may not learn enough and can underfit, performing poorly on new data.</li>
<li><strong>Too Many Epochs:</strong> The network may learn too much and can overfit, performing well on the training data but poorly on new data.</li>
</ul></li>
<li><strong>Optimum Number of Epochs:</strong> An optimal number of epochs strikes a balance between underfitting and overfitting, ensuring the network generalizes well to new data.</li>
</ul>
</section>
</section>
<section id="test-citation" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> test citation</h1>
<p>as dr farid said <span class="citation" data-cites="khalil-ApplicationArtificialNeural-2013">Khalil, Elgohary, and Shaito (<a href="#ref-khalil-ApplicationArtificialNeural-2013" role="doc-biblioref">2013</a>)</span> this is no enough</p>
<section id="references" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-khalil-ApplicationArtificialNeural-2013" class="csl-entry" role="listitem">
Khalil, Mohamed, Mohamed Elgohary, and Ali Shaito. 2013. <span>“Application of Artificial Neural Network for the Prediction of Trimmed Impeller Size of a Centrifugal Pump.”</span> In.
</div>
</div>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{tawheed2024,
  author = {Tawheed, Mohamed and Ibrahim, Seif},
  title = {Pump Impeller Trimming Draft-01},
  date = {2024-04-17},
  langid = {en},
  abstract = {This paper presents a genetic algorithm (GA) methodology
    to optimize neural network hyperparameters in the context of pump
    impeller trimming. Impeller trimming, a process involving
    modifications to pump impeller geometry, traditionally requires
    expert knowledge and empirical methods to achieve the desired
    performance. The use of neural networks (NNs) provides an automated
    approach to improve the impeller trimming process based on input
    data and performance outcomes. The proposed method uses a GA to
    identify the optimal NN hyperparameters, such as hidden layer size,
    training function, activation function, and maximum epochs, aiming
    to minimize the mean squared error (MSE) between the network’s
    predictions and the actual target outcomes. This paper discusses the
    implementation details of the optimization process and explains the
    key components and their significance.}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-tawheed2024" class="csl-entry quarto-appendix-citeas" role="listitem">
Tawheed, Mohamed, and Seif Ibrahim. 2024. <span>“Pump Impeller Trimming
Draft-01.”</span> Bachelor Project with Prof. Dr. Mohamed Farid Khalil.
April 17, 2024.
</div></div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>